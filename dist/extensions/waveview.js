/*
录音
https://github.com/xiangyuecn/Recorder
src: extensions/waveview.js
*/
!function(){var e=function(e){return new t(e)},t=function(e){var t=this,i={lineWidth:2,linear1:[0,"rgba(150,97,236,1)",1,"rgba(54,197,252,1)"],linear2:[0,"rgba(209,130,253,0.6)",1,"rgba(54,197,252,0.6)"],linearBg:[0,"rgba(255,255,255,0.2)",1,"rgba(54,197,252,0.2)"]};for(var n in e)i[n]=e[n];t.set=e=i;var a=e.elem;a&&("string"==typeof a?a=document.querySelector(a):a.length&&(a=a[0])),a&&(e.width=a.offsetWidth,e.height=a.offsetHeight);var r=t.canvas=document.createElement("canvas"),h=t.ctx=r.getContext("2d");r.width=e.width,r.height=e.height,t.linear1=t.genLinear(h,e.width,e.linear1),t.linear2=t.genLinear(h,e.width,e.linear2),t.linearBg=t.genLinear(h,e.width,e.linearBg,!0),a&&(a.innerHTML="",a.appendChild(r)),t._phase=0};t.prototype=e.prototype={genLinear:function(e,t,i,n){for(var a=e.createLinearGradient(0,0,n?0:t,n?t:0),r=0;r<i.length;)a.addColorStop(i[r++],i[r++]);return a},genPath:function(e,t,i){for(var n=[],a=this.set,r=a.width,h=a.height/2,o=0;o<r;o+=1){var l=(1+Math.cos(Math.PI+o/r*2*Math.PI))/2*h*t*Math.sin(2*Math.PI*(o/r)*e+i)+h;n.push(l)}return n},input:function(e,t,i){var n=this,a=n.set,r=n.ctx,h=a.width,o=n._phase-=.22,l=t/100,g=n.genPath(2,l,o),d=n.genPath(1.8,l,o+3);r.clearRect(0,0,a.width,a.height),r.beginPath();for(var c=0;c<h;c+=1)0==c?r.moveTo(c,g[c]):r.lineTo(c,g[c]);for(c=h-1;0<=c;c-=1)r.lineTo(c,d[c]);r.closePath(),r.fillStyle=n.linearBg,r.fill(),n.drawPath(d,n.linear2),n.drawPath(g,n.linear1)},drawPath:function(e,t){var i=this.set,n=this.ctx,a=i.width;n.beginPath();for(var r=0;r<a;r+=1)0==r?n.moveTo(r,e[r]):n.lineTo(r,e[r]);n.lineWidth=i.lineWidth,n.strokeStyle=t,n.stroke()}},Recorder.WaveView=e}();